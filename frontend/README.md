# Knowledge Dreamer - Frontend

A React + Vite frontend application for visualizing knowledge graphs generated by the Knowledge Dreamer microservice.

## Features

- üìä **Interactive Graph Visualization** - Powered by React Flow
- üé® **Modern UI** - Clean, responsive design with smooth animations
- ‚ö° **Real-time Generation** - Watch knowledge graphs expand in real-time
- üîç **Node Details** - Click nodes to see full content and relationships
- üìà **Performance Metrics** - Track generation time and node counts

## Getting Started

### Prerequisites

- Node.js 20+
- pnpm (recommended) or npm
- Knowledge Dreamer backend running on `http://localhost:3457`

### Installation

```bash
# Install dependencies
pnpm install

# Start development server
pnpm dev
```

The frontend will be available at `http://localhost:5173`

## Usage

1. **Open the Application**
   Navigate to `http://localhost:5173` in your browser

2. **Fill Out the Form**
   - Enter a customer/company description
   - Enter a target product description
   - Adjust children count (nodes per parent)
   - Adjust generations (depth of exploration)

3. **Generate the Dream**
   Click "Generate Dream" and wait for the knowledge graph to be created

4. **Explore the Visualization**
   - **Pan**: Click and drag the background
   - **Zoom**: Scroll up/down
   - **View Details**: Click any node to see full content
   - **Follow Relationships**: Animated edges show connections

## Architecture

### Components

#### `App.tsx`
Main application component that orchestrates the form and visualization.

#### `components/DreamForm.tsx`
Input form for configuring dream parameters:
- Customer description
- Product description
- Children count (1-5)
- Generations count (1-5)

#### `components/KnowledgeGraph.tsx`
React Flow-based visualization component that:
- Converts backend nodes to React Flow format
- Calculates tree-based layout using BFS
- Renders interactive graph with controls

#### `api.ts`
API service for backend communication:
- `healthCheck()` - Verify backend status
- `generateKnowledgeGraph()` - Trigger knowledge expansion

#### `types.ts`
TypeScript interfaces matching backend schemas

### Styling

The app uses a modern, accessible design with:
- CSS custom properties for theming
- Responsive layout
- Smooth animations and transitions
- Mobile-friendly UI

## Configuration

### API Endpoint

The backend URL is configured in `src/api.ts`:

```typescript
const API_BASE_URL = 'http://localhost:3457';
```

### Proxy Setup

Vite is configured with a proxy in `vite.config.ts` to handle CORS:

```typescript
server: {
  port: 5173,
  proxy: {
    '/api': {
      target: 'http://localhost:3457',
      changeOrigin: true,
    }
  }
}
```

### AI Backend Configuration

The frontend connects to the Knowledge Dreamer backend which uses AI to generate knowledge graphs. The backend supports multiple AI providers:

- **Google Gemini** (default) - Cloud-based, fast generation
- **Ollama** - Run models locally (Llama, Mistral, etc.)
- **LM Studio** - User-friendly local model interface
- **llama.cpp** - High-performance local inference

See the [backend README](../mastra/README.md#ai-configuration) for detailed AI configuration options including:
- How to use local AI models for privacy
- Switching between different AI providers
- Model recommendations for different use cases
- Performance tuning parameters

## Development

### Scripts

```bash
# Start development server with hot reload
pnpm dev

# Build for production
pnpm build

# Preview production build
pnpm preview

# Type check
pnpm tsc
```

### Project Structure

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DreamForm.tsx       # Configuration form
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ KnowledgeGraph.tsx  # Graph visualization
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                 # Main app component
‚îÇ   ‚îú‚îÄ‚îÄ App.css                 # Styles
‚îÇ   ‚îú‚îÄ‚îÄ api.ts                  # Backend integration
‚îÇ   ‚îú‚îÄ‚îÄ types.ts                # TypeScript types
‚îÇ   ‚îî‚îÄ‚îÄ main.tsx                # Entry point
‚îú‚îÄ‚îÄ public/                     # Static assets
‚îú‚îÄ‚îÄ index.html                  # HTML template
‚îú‚îÄ‚îÄ vite.config.ts              # Vite configuration
‚îú‚îÄ‚îÄ tsconfig.json               # TypeScript config
‚îî‚îÄ‚îÄ package.json
```

## Dependencies

### Core
- **React 19** - UI library
- **React DOM 19** - React renderer
- **Vite 7** - Build tool and dev server
- **TypeScript 5** - Type safety

### Visualization
- **React Flow 11** - Graph visualization library

### HTTP
- **Axios 1** - HTTP client

## Customization

### Graph Layout

The graph uses a tree-based layout algorithm in `KnowledgeGraph.tsx`. Adjust spacing:

```typescript
const horizontalSpacing = 400; // Space between nodes horizontally
const verticalSpacing = 150;   // Space between levels vertically
```

### Node Styling

Customize node appearance:

```typescript
style: {
  background: nodeId === 'root' ? '#6366f1' : '#ffffff',
  border: '2px solid #6366f1',
  borderRadius: '8px',
  // ... more styles
}
```

### Color Theme

Edit CSS variables in `App.css`:

```css
:root {
  --primary-color: #6366f1;
  --primary-dark: #4f46e5;
  --primary-light: #818cf8;
  /* ... more colors */
}
```

## Troubleshooting

### Frontend won't start

```bash
# Ensure dependencies are installed
pnpm install

# Check for port conflicts
lsof -i :5173
```

### Can't connect to backend

1. Verify backend is running:
   ```bash
   curl http://localhost:3457/
   ```

2. Check CORS configuration in backend `server.ts`

3. Verify proxy configuration in `vite.config.ts`

### Graph doesn't render

1. Check browser console for errors
2. Verify API response structure matches types
3. Ensure React Flow styles are imported

## Example Screenshots

### Empty State
Clean interface ready for input

### Form Filled
Pre-populated with example data

### Graph Visualization
Interactive tree layout with animated edges

### Stats Display
Performance metrics after generation

## Performance

- Initial load: < 500ms
- Graph generation: 5-10s (depends on parameters)
- Rendering: < 100ms for typical graphs (< 20 nodes)
- Memory: ~50-100MB for typical sessions

## Browser Support

- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

## License

See LICENSE file in project root.

## Related Projects

- [Knowledge Dreamer Backend](../mastra/src/dreamer/) - The microservice that generates knowledge graphs
- [Code Dreamer Project](../) - Main hackathon project

## Contributing

This is a hackathon project. For improvements:
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

## Future Enhancements

- [ ] Export graph as PNG/SVG
- [ ] Save/load graph configurations
- [ ] Multiple layout algorithms
- [ ] Dark mode toggle
- [ ] Real-time collaboration
- [ ] Graph search/filter
- [ ] Accessibility improvements
